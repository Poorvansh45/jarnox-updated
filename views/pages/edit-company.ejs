<% layout('layouts/boilerplate') %>

<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h4 class="mb-0">Edit Company</h4>
        </div>
        <div class="card-body">
          <% if (typeof error !== 'undefined') { %>
            <div class="alert alert-danger" role="alert">
              <%= error %>
            </div>
          <% } %>

          <form method="POST" action="/admin/companies/<%= company.id %>">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="symbol" class="form-label">Stock Symbol *</label>
                  <input type="text" class="form-control" id="symbol" name="symbol" 
                         value="<%= company.symbol %>" placeholder="e.g., RELIANCE" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="sector" class="form-label">Sector *</label>
                  <select class="form-select" id="sector" name="sector" required>
                    <option value="">Select Sector</option>
                    <option value="Technology" <%= company.sector === 'Technology' ? 'selected' : '' %>>Technology</option>
                    <option value="Banking" <%= company.sector === 'Banking' ? 'selected' : '' %>>Banking</option>
                    <option value="Energy" <%= company.sector === 'Energy' ? 'selected' : '' %>>Energy</option>
                    <option value="Automotive" <%= company.sector === 'Automotive' ? 'selected' : '' %>>Automotive</option>
                    <option value="Pharmaceuticals" <%= company.sector === 'Pharmaceuticals' ? 'selected' : '' %>>Pharmaceuticals</option>
                    <option value="FMCG" <%= company.sector === 'FMCG' ? 'selected' : '' %>>FMCG</option>
                    <option value="Telecommunications" <%= company.sector === 'Telecommunications' ? 'selected' : '' %>>Telecommunications</option>
                    <option value="Steel" <%= company.sector === 'Steel' ? 'selected' : '' %>>Steel</option>
                    <option value="Cement" <%= company.sector === 'Cement' ? 'selected' : '' %>>Cement</option>
                    <option value="Mining" <%= company.sector === 'Mining' ? 'selected' : '' %>>Mining</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label for="name" class="form-label">Company Name *</label>
              <input type="text" class="form-control" id="name" name="name" 
                     value="<%= company.name %>" placeholder="e.g., Reliance Industries Limited" required>
            </div>

            <div class="mb-3">
              <label for="market_cap" class="form-label">Market Cap (in Billions)</label>
              <input type="number" step="0.01" class="form-control" id="market_cap" name="market_cap" 
                     value="<%= company.market_cap || '' %>" placeholder="e.g., 1500.50">
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea class="form-control" id="description" name="description" rows="3" 
                        placeholder="Brief description of the company"><%= company.description || '' %></textarea>
            </div>

            <div class="d-flex justify-content-between">
              <a href="/admin" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back
              </a>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Update Company
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
